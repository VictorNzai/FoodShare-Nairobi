<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FoodShare Donor Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Manrope", "Noto Sans", sans-serif;
      }
      .sticky-navbar {
        position: sticky;
        top: 0;
        z-index: 50;
        background: #fff;
        box-shadow: 0 2px 12px 0 rgba(84, 209, 43, 0.04);
      }
      .nav-link.active,
      .nav-link:hover {
        background: #eaf3e7;
        color: #54d12b;
        font-weight: 700;
      }
    </style>
  </head>
  <body class="bg-[#f9fcf8] text-[#111b0e]">
    <!-- Sticky Navbar & Sidebar Layout -->
    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside class="hidden lg:flex flex-col w-64 bg-white border-r border-[#eaf3e7] py-8 px-6 sticky top-0 h-screen z-10">
        <div class="mb-10 flex items-center gap-2">
          <span class="font-extrabold text-2xl text-[#54d12b]">üç¥</span>
          <span class="font-extrabold text-xl text-[#54d12b]">FoodShare</span>
        </div>
        <nav class="flex flex-col gap-2 text-base">
          <a href="./FoodDonor.html" class="nav-link px-4 py-2 rounded-full font-medium active" id="nav-dashboard">Dashboard</a>
          <a href="#" class="nav-link px-4 py-2 rounded-full font-medium" id="nav-donations">Donations</a>
          <a href="#" class="nav-link px-4 py-2 rounded-full font-medium" id="nav-charities">Charities</a>
          <a href="./CharityRequestsPage.html" class="nav-link px-4 py-2 rounded-full font-medium" id="nav-requests">Charity Requests</a>
          <a href="./DonorAccount.html" class="nav-link px-4 py-2 rounded-full font-medium" id="nav-account">Account</a>
          <a href="#" class="nav-link px-4 py-2 rounded-full font-medium" id="nav-help">Help</a>
          <button id="logoutBtn" class="nav-link px-4 py-2 rounded-full font-medium text-left mt-8">Logout</button>
        </nav>
        <div class="mt-auto flex items-center gap-3 pt-10">
          <div class="w-10 h-10 bg-cover bg-center rounded-full border border-[#eaf3e7]" id="donor-avatar" style="background-image: url('https://ui-avatars.com/api/?name=Donor');"></div>
          <span class="font-semibold text-[#121a0f]" id="sidebar-donor-name">Donor</span>
        </div>
      </aside>
      <!-- Main Content Area -->
      <div class="flex-1 flex flex-col">
        <!-- Sticky Navbar (for mobile/tablet) -->
        <nav class="sticky-navbar flex lg:hidden items-center justify-between px-6 py-3 border-b border-[#eaf3e7] bg-white z-20">
          <div class="flex items-center gap-4">
            <span class="font-extrabold text-xl text-[#54d12b]">üç¥ FoodShare</span>
          </div>
          <div class="flex items-center gap-4">
            <button id="logoutBtnMobile" class="nav-link px-4 py-2 rounded-full text-sm font-medium">Logout</button>
            <div class="w-10 h-10 bg-cover bg-center rounded-full border border-[#eaf3e7]" id="donor-avatar-mobile" style="background-image: url('https://ui-avatars.com/api/?name=Donor');"></div>
          </div>
        </nav>

    <!-- Main Content -->
    <main class="flex-1">
      <section class="p-6 max-w-screen-xl mx-auto">
        <h2
          id="donor-greeting"
          class="text-[32px] font-bold leading-tight mb-6"
        ></h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
          <div
            class="bg-[#fff] border border-[#eaf3e7] p-6 rounded-xl flex flex-col items-start"
          >
            <p class="text-base font-medium text-[#54d12b] mb-1">
              Active Donations
            </p>
            <p
              class="text-2xl font-extrabold text-[#121a0f]"
              id="stat-active-donations"
            >
              --
            </p>
          </div>
          <div
            class="bg-[#fff] border border-[#eaf3e7] p-6 rounded-xl flex flex-col items-start"
          >
            <p class="text-base font-medium text-[#54d12b] mb-1">
              Total Food Donated
            </p>
            <p
              class="text-2xl font-extrabold text-[#121a0f]"
              id="stat-food-donated"
            >
              --
            </p>
          </div>

          <div
            class="bg-[#fff] border border-[#eaf3e7] p-6 rounded-xl flex flex-col items-start"
          >
            <p class="text-base font-medium text-[#54d12b] mb-1">
              People Served
            </p>
            <p
              class="text-2xl font-extrabold text-[#121a0f]"
              id="stat-people-served"
            >
              --
            </p>
          </div>
        </div>
        <div class="flex flex-wrap gap-3 mb-4">
          <button
            class="bg-[#53d22c] hover:bg-[#43b81a] text-white h-10 px-5 rounded-full text-sm font-bold shadow"
            id="btn-make-donation"
          >
            Make a Donation
          </button>
          <button
            class="bg-[#eaf3e7] hover:bg-[#d5e7d0] text-[#121a0f] h-10 px-5 rounded-full text-sm font-bold"
            id="btn-schedule-pickup"
          >
            Schedule a Pickup
          </button>
          <button
            class="bg-[#eaf3e7] hover:bg-[#d5e7d0] text-[#121a0f] h-10 px-5 rounded-full text-sm font-bold"
            id="btn-browse-charities"
          >
            Browse Charities
          </button>
        </div>

        <!-- Active Donations Table -->
        <h3 class="text-[22px] font-bold tracking-tight mb-2 mt-8">
          Active Donations
        </h3>
        <div
          class="overflow-auto rounded-xl border border-[#d5e7d0] bg-white mb-6"
        >
          <table class="w-full text-sm" id="activeDonationsTable">
            <thead class="text-left">
              <tr class="border-b border-[#d5e7d0]">
                <th class="px-4 py-3">Donation ID</th>
                <th class="px-4 py-3">Charity</th>
                <th class="px-4 py-3">Food Items</th>
                <th class="px-4 py-3">Status</th>
                <th class="px-4 py-3">Action</th>
              </tr>
            </thead>
            <tbody id="activeDonationsBody">
              <!-- Dynamic -->
            </tbody>
          </table>
        </div>

        <!-- Donation History -->
        <h3 class="text-[22px] font-bold tracking-tight mb-2">
          Donation History
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="border border-[#d5e7d0] rounded-xl p-6">
            <p class="text-base font-medium mb-2">
              Total Food Donated (Past 6 Months)
            </p>
            <img
              src="https://via.placeholder.com/300x150"
              alt="Chart"
              class="w-full h-auto"
            />
          </div>
          <div class="border border-[#d5e7d0] rounded-xl p-6">
            <p class="text-base font-medium mb-2">
              People Served (Past 12 Months)
            </p>
            <img
              src="https://via.placeholder.com/300x150"
              alt="Chart"
              class="w-full h-auto"
            />
          </div>
        </div>

        <!-- Charity Requests Section -->
        <h3 class="text-[22px] font-bold tracking-tight mb-2 mt-10">
          Charity Food Requests
        </h3>
        <div id="charity-requests-section" class="mb-10"></div>
      </section>

      <!-- Footer -->
      <footer class="text-center py-10 text-[#5e974e] text-sm">
        <div class="flex flex-wrap justify-center gap-6 mb-4">
          <a href="#">About</a>
          <a href="#">Contact</a>
          <a href="#">Terms of Service</a>
          <a href="#">Privacy Policy</a>
        </div>
        <p>¬© 2025 FoodShare. All rights reserved.</p>
      </footer>
    </main>

    <!-- JS: Navbar, Stats, Table, Actions -->
    <script src="CharityRequests.js"></script>
    <script>
      // Sidebar navigation logic (fixes broken links)
      document.getElementById('nav-dashboard').onclick = function(e) {
        e.preventDefault();
        window.location.href = './FoodDonor.html';
      };
      document.getElementById('nav-donations').onclick = function(e) {
        e.preventDefault();
        alert('Donations page coming soon!');
      };
      document.getElementById('nav-charities').onclick = function(e) {
        e.preventDefault();
        window.location.href = '../BrowseCharities.html';
      };
      document.getElementById('nav-requests').onclick = function(e) {
        e.preventDefault();
        window.location.href = './CharityRequestsPage.html';
      };
      document.getElementById('nav-account').onclick = function(e) {
        e.preventDefault();
        window.location.href = './DonorAccount.html';
      };
      document.getElementById('nav-help').onclick = function(e) {
        e.preventDefault();
        alert('Help page coming soon!');
      };
      document.getElementById('logoutBtn').onclick = function() {
        localStorage.clear();
        window.location.href = '../Login.html';
      };

      // Dynamic greeting
      const donorName = localStorage.getItem("donorName") || "Donor";
      document.getElementById("donor-greeting").textContent = `Welcome back, ${donorName}`;
      document.getElementById("donor-avatar").style.backgroundImage = `url('https://ui-avatars.com/api/?name=${encodeURIComponent(donorName)}')`;

      // Stats placeholders (replace with backend fetch)
      document.getElementById("stat-active-donations").textContent = "--";
      document.getElementById("stat-food-donated").textContent = "--";
      document.getElementById("stat-people-served").textContent = "--";

      // Active Donations Table placeholder
      const activeDonations = [
        {
          id: "#12345",
          charity: "Helping Hands Shelter",
          items: "Canned Goods, Rice, Pasta",
          status: "Scheduled",
        },
        {
          id: "#67890",
          charity: "Community Kitchen",
          items: "Fresh Produce, Bread",
          status: "In Transit",
        },
        {
          id: "#11223",
          charity: "Food Bank of Cityville",
          items: "Dairy Products, Eggs",
          status: "Delivered",
        },
      ];
      const tbody = document.getElementById("activeDonationsBody");
      tbody.innerHTML = "";
      activeDonations.forEach((d) => {
        tbody.innerHTML += `<tr class="border-t border-[#d5e7d0]">
          <td class="px-4 py-2">${d.id}</td>
          <td class="px-4 py-2 text-[#5e974e]">${d.charity}</td>
          <td class="px-4 py-2 text-[#5e974e]">${d.items}</td>
          <td class="px-4 py-2"><span class="inline-block bg-[#eaf3e7] px-4 py-1 rounded-full">${d.status}</span></td>
          <td class="px-4 py-2 text-[#5e974e] font-bold cursor-pointer" onclick="alert('Details for ${d.id}')">View Details</td>
        </tr>`;
      });

      // Button actions (scaffold)
      document.getElementById("btn-make-donation").onclick = () =>
        alert("Make a Donation form coming soon!");
      document.getElementById("btn-schedule-pickup").onclick = () =>
        alert("Schedule a Pickup coming soon!");
      document.getElementById("btn-browse-charities").onclick = () =>
        (window.location.href = "../BrowseCharities.html");
    </script>
  </body>
</html>
